(function(e){function t(t){for(var s,l,n=t[0],i=t[1],c=t[2],u=0,p=[];u<n.length;u++)l=n[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&p.push(o[l][0]),o[l]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,n=1;n<a.length;n++){var i=a[n];0!==o[i]&&(s=!1)}s&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},o={app:0},r=[];function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),o=a.n(s);o.a},"2cfd":function(e,t,a){"use strict";var s=a("e07e"),o=a.n(s);o.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("vue-particles",{attrs:{color:"#CD5555",particleOpacity:1,particlesNumber:180,shapeType:"circle",particleSize:4,linesColor:"#dedede",linesWidth:2,lineLinked:!0,lineOpacity:1,linesDistance:150,moveSpeed:3,hoverEffect:!0,hoverMode:"grab",clickEffect:!0,clickMode:"push"}}),a("el-container",{staticStyle:{position:"absolute",top:"0",width:"100%",height:"100%"}},[a("el-header",[a("Logo")],1),a("el-main",[a("router-view")],1)],1)],1)},r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"logo"},[a("el-row",[a("el-col",{attrs:{span:12,xs:24}},[a("img",{staticStyle:{width:"400px"},attrs:{src:"/logo.jpg"},on:{click:e.home}}),e.showSelect?a("div",{staticStyle:{display:"inline"}},[e._v(e._s(e.collegename))]):e._e()]),a("el-col",{attrs:{span:12,xs:24}},[e.showSelect?a("el-row",{attrs:{type:"flex",justify:"end"}},[0==e.years.length?a("el-button",{on:{click:e.requestNav}},[e._v("请求导航数据")]):e._e(),a("el-select",{on:{change:e.selectYear},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.years,(function(e){return a("el-option",{key:e,attrs:{label:e+"年度",value:e}})})),1),a("el-select",{on:{change:e.selectYear},model:{value:e.term,callback:function(t){e.term=t},expression:"term"}},e._l(e.terms,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-cascader",{attrs:{placeholder:"进入班级界面",options:e.classes},on:{change:e.intoClass}})],1):e._e()],1)],1)],1)},n=[],i=a("7618"),c=(a("ac6a"),a("456d"),a("7f7f"),{state:{login:{username:""},year:"2019",term:"term1",colleges:["大数据与人工智能学院","计算机工程技术学院","商学院","应用外语学院","旅游学院旅","文化与传媒","机器人学院","机械与汽车学院","建筑工程学院","艺术设计学院","财会与金融学院","体育健康学院","马克思主义学院","国际合作学院","创新创业学院      ","广州学院","继续教育学院"],termName:function(){return"term1"==this.term?"第一学期":"term2"==this.term?"第二学期":"year"==this.term?"年度":void 0}},setUserName:function(e){this.state.login.username=e},setStudent:function(e){this.state.nowStudent=e},setYear:function(e){this.state.year=e},setTerm:function(e){this.state.term=e}}),d={basicCard:{year_score:123,term1_score:90,term2_score:120},indexes:{indexes:["身心健康","思想政治","创新创业"],scores:[100,200]},top:{"平均分":{classes:[{name:"17大数据1班",id:"17bigdata1",score:129},{name:"17大数据2班",id:"17bigdata2",score:80}],students:[{name:"小李",score:420},{name:"小菜",score:350},{name:"小大",score:200}]},"身心健康":{classes:[{name:"class1",score:12},{name:"class2",score:8}],students:[{name:"小明",score:300},{name:"小绿",score:250},{name:"小红",score:200}]},"思想政治":{classes:[{name:"class1",score:15},{name:"class2",score:12}],students:[{name:"小李",score:300},{name:"小绿",score:50},{name:"小孙",score:20}]},"创新创业":{classes:[{name:"class1",score:19},{name:"class2",score:13}],students:[{name:"小蓝",score:30},{name:"小紫",score:20},{name:"小红",score:10}]}},range:{ranges:["(0-10]","(10-20]","(20-30]"],term1_scores:[10,30,25],term2_scores:[20,40,55]},gpa_score:{gpas:[4.1,4,2,4,3],scores:[20,30,40]},trend:{years:["2018","2019","2020"],term1:[6,3,4],term2:[4,5,2]}},u=new s["default"],p=(a("a481"),a("bc3a")),g=a.n(p),m=(a("4328"),a("4be7"),a("8c4f")),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:5,xs:24}},[a("el-card",{attrs:{"body-style":"padding:26px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(this.stateStore.year)+"年度总平均分")])]),a("div",{staticClass:"cardtext"},[e._v(e._s(e.data.basicCard.year_score))])]),a("el-card",{attrs:{"body-style":"padding:26px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(this.stateStore.year)+"年度第一学期平均分")])]),a("div",{staticClass:"cardtext"},[e._v(e._s(e.data.basicCard.term1_score))])]),a("el-card",{attrs:{"body-style":"padding:26px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(this.stateStore.year)+"年度第二学期平均分")])]),a("div",{staticClass:"cardtext"},[e._v(e._s(e.data.basicCard.term2_score))])])],1),a("el-col",{attrs:{span:8,xs:24}},[a("el-card",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击饼图块切换不同指标的数据",placement:"bottom"}},[a("v-chart",{ref:"index",staticClass:"chart",attrs:{autoresize:""},on:{pieselectchanged:e.indexChange}})],1)],1)],1),a("el-col",{attrs:{span:11,xs:24}},[a("el-card",[a("v-chart",{ref:"classtop",staticClass:"chart",attrs:{autoresize:""},on:{click:e.intoClass}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:5,xs:24}},[a("el-card",{attrs:{"body-style":"padding:12px"}},[a("div",{staticStyle:{"text-align":"center","font-weight":"bold"}},[e._v(e._s(this.stateStore.year)+" 年度 "+e._s(this.stateStore.termName())+" "+e._s(this.nowIndex)+" TOP50 学生")]),a("el-table",{attrs:{data:e.studenttop50,height:"400"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{property:"name",label:"姓名"}}),a("el-table-column",{attrs:{property:"score",label:"分数"}})],1)],1)],1),a("el-col",{attrs:{span:8,xs:24}},[a("el-card",{attrs:{"body-style":"padding:30px"}},[a("v-chart",{ref:"range",staticClass:"chart",attrs:{autoresize:""}})],1)],1),a("el-col",{attrs:{span:11,xs:24}},[a("el-card",{attrs:{"body-style":"padding:30px"}},[a("v-chart",{ref:"gpa_score",staticClass:"chart",attrs:{autoresize:""}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:15}},[a("el-col",{attrs:{span:13,xs:24}},[a("el-card",[a("v-chart",{ref:"trend",staticClass:"chart",attrs:{autoresize:""}})],1)],1)],1)],1)},f=[],v={created:function(){},mounted:function(){var e=this;console.log("挂载 mounted..."),u.$on("collegeDataLoad",(function(t){console.log("学院界面请求到数据..."),e.data=t,e.nowIndex="平均分",e.setIndex(),e.set_classtop(),e.set_gpa_score(),e.set_range(),e.set_trend(),e.hideLoad()})),this.showLoad(),u.$emit("requestData","学院")},name:"College",methods:{intoClass:function(e){console.log("进入班级.."),this.$router.push({name:"class",params:{classid:e.name,collegeid:"大数据与人工智能学院"}})},showLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].showLoading()}))},hideLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].hideLoading()}))},indexChange:function(e){console.log("选择饼图:"+e.name);var t="平均分";for(var a in e.selected)1==e.selected[a]&&(t=a);console.log("选择的指标:"+t),this.nowIndex=t,this.set_classtop()},set_classtop:function(){console.log("设置班级top数据:"+this.nowIndex);var e=this.$refs["classtop"];if(-1!=Object.keys(this.data["top"]).indexOf(this.nowIndex)){var t=this.data["top"][this.nowIndex]["classes"],a=[],s=[];t.forEach((function(e){a.push(e["name"]),s.push(e["score"])})),a=a.reverse(),s=s.reverse();var o={title:{text:"".concat(this.stateStore.year," 年度 ").concat(this.stateStore.termName()," ").concat(this.nowIndex," TOP5班级")},tooltip:{},grid:{left:"20%"},xAxis:{type:"value",name:"分数",boundaryGap:!1,axisTick:{interval:0},axisLabel:{interval:0}},yAxis:{name:"班级",type:"category",data:a},series:{type:"bar",data:s}};e.mergeOptions(o)}else console.warn("设置班级top图失败,"+this.nowIndex+"不存在")},set_range:function(){var e=this.data["range"]["ranges"],t=this.data["range"]["term1_scores"],a=this.data["range"]["term2_scores"],s={tooltip:{formatter:function(e){var s=e.dataIndex,o=e.color;return'<div style="color:'.concat(o,'">▲</div>第一学期:')+t[s]+'<div style="color:'.concat(o,'">▼</div>第二学期:')+a[s]+'<div style="color:'.concat(o,'">●</div>总和:')+(t[s]+a[s])}},title:{text:"".concat(this.stateStore.year," 年度综合素质总分各区间分布")},xAxis:{data:e,name:"分数区间",axisLabel:{interval:0}},yAxis:{name:"个数/人"},legend:{right:0},series:[{stack:"总和",name:"第一学期",type:"bar",data:t},{stack:"总和",name:"第二学期",type:"bar",data:a}]};this.$refs["range"].mergeOptions(s)},set_gpa_score:function(){for(var e=[],t=0;t<this.data["gpa_score"]["gpas"].length;t+=1)e.push([this.data["gpa_score"]["gpas"][t],this.data["gpa_score"]["scores"][t]]);var a={backgroundColor:"white",tooltip:{},title:{text:"GPA成绩与综合素质总分的关系"},xAxis:{name:"GPA"},yAxis:{name:"综合素质总分"},series:{type:"scatter",data:e}};this.$refs["gpa_score"].mergeOptions(a)},set_trend:function(){var e=this.$refs["trend"],t={backgroundColor:"white",tooltip:{},title:{text:"学院各年平均分变化"},xAxis:{name:"年度",boundaryGap:!1,data:this.data["trend"]["years"]},yAxis:{name:"综合平均分"},legend:{},series:[{stack:"年度",name:"第一学期",type:"line",data:this.data["trend"]["term1"],areaStyle:{}},{stack:"年度",name:"第二学期",type:"line",data:this.data["trend"]["term2"],areaStyle:{}}]};e.mergeOptions(t)},setIndex:function(){console.log("setIndex:设置饼图");for(var e=[],t=0;t<this.data.indexes.indexes.length;t+=1)"平均分"!=this.data.indexes.indexes[t]&&e.push({name:this.data.indexes.indexes[t],value:this.data.indexes.scores[t]});var a={tooltip:{},title:{text:"".concat(this.stateStore.year," 年度 ").concat(this.stateStore.termName(),"  各项指标平均分数")},series:{label:{show:!0,formatter:"{b}({d}%)"},type:"pie",selectedMode:"single",data:e}},s=this.$refs["index"];s.mergeOptions(a)}},computed:{studenttop50:function(){if(console.log("更新Top 50 表格:now index:"+this.nowIndex),-1!=Object.keys(this.data["top"]).indexOf(this.nowIndex)){var e=this.data["top"][this.nowIndex]["students"];return e}console.log("当前指标不存在:"+this.nowIndex)}},data:function(){return{nowIndex:"平均分",stateStore:c.state,data:d}}},b=v,x=(a("f631"),a("2877")),y=Object(x["a"])(b,h,f,!1,null,"67aedfc7",null),w=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:4,xs:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("基本情况")])]),a("div",[e._v(e._s(e.data.classjbCard.classname))]),a("div",[e._v("人数:"+e._s(e.data.classjbCard.students))])]),a("el-card",[a("el-collapse",{attrs:{change:"handleChange"},on:{"":function(e){}},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"根据在院里的排名，而给你的建议",name:"1"}},[a("div",[e._v(e._s(e.proposal))]),a("div",[e._v(e._s(e.proposal2))])])],1)],1)],1),a("el-col",{attrs:{span:11,xs:24}},[a("el-card",[a("v-chart",{ref:"suchindexscore",staticClass:"chart",attrs:{autoresize:""}})],1)],1),a("el-col",{attrs:{span:9,xs:24}},[a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.peoples,height:"400"},on:{"row-click":e.intoStudent}},[a("el-table-column",{attrs:{prop:"name",label:"班级同学名单"}})],1)],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:4,xs:20}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("第一学期综合素质均分及排名")])]),a("div",[e._v("第一学期综合素质平均分:"+e._s(e.data.classCard1.term1_score))]),a("div",[e._v("第一学期在全院排名:"+e._s(e.data.classCard1.term1_paiming))])]),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("第二学期综合素质均分及排名")])]),a("div",[e._v("第二学期综合素质平均分:"+e._s(e.data.classCard2.term2_score))]),a("div",[e._v("第二学期在全院排名:"+e._s(e.data.classCard2.term2_paiming))])])],1),a("el-col",{attrs:{span:11,xs:24}},[a("el-card",[a("el-select",{staticStyle:{"margin-left":"300px"},attrs:{clearable:"",placeholder:"请选择",size:"small"},on:{change:e.zhibiaochange},model:{value:e.nowIndex,callback:function(t){e.nowIndex=t},expression:"nowIndex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("v-chart",{ref:"topstudent",staticClass:"chart",attrs:{autoresize:""}})],1)],1),a("el-col",{attrs:{span:9,xs:24}},[a("el-card",{attrs:{"body-style":"padding:36px"}},[a("v-chart",{ref:"totalscores",staticClass:"chart",attrs:{autoresize:""}})],1)],1)],1)],1)},C=[],$={classjbCard:{classname:"17云计算1班",students:43},classCard1:{term1_score:15,term1_paiming:9},classCard2:{term2_score:1,term2_paiming:6},suchindexscores:[{value:[13,8,9,10,17,10,0],name:"学院指标平均分"},{value:[10,5,19,16,5,11,0],name:"班级指标平均分"}],students:{student:["陈秋明","梁家辉","赵旺","梁建成","渣渣"]},topstudent:{"身心健康":{names:["渣渣1","渣渣2","渣渣3","渣渣4","渣渣5"],scores:[5,6,7,9,15]},"创新创业":{names:["渣渣1","渣渣2","渣渣3","渣渣4","渣渣5"],scores:[15,6,17,9,15]}},totalscores:{ranges:["0-10","11-20","21-30","31-40","41-50"],allscores:[{value:320,name:"0-10"},{value:9,name:"11-20"},{value:8,name:"21-30"},{value:7,name:"31-40"},{value:4,name:"41-50"}]}},k={name:"banji",beforeRouteEnter:function(e,t,a){console.log("before router enter"),a()},beforeRouteUpdate:function(){console.log("班级导航更新..请求数据"),u.$emit("requestData","班级")},mounted:function(){var e=this,t=["思想政治","身心健康","创新创业","技术技能","志愿服务","人文艺术","综合素质理论"];console.log("Class mounted"),u.$on("classDataLoad",(function(a){e.hideLoad(),console.log("班级界面请求到数据..."),console.log(a),e.data=a,e.set_topstudent(),e.set_suchindexscore(),e.set_studentnames(),e.set_topstudent(),e.set_totalscores();var s=0,o=e.data.suchindexscores[1].value;console.log("判断索引..."),console.log(o);for(var r=0;r<o.length-2;r+=1)o[r]<o[s]&&(s=r);e.proposal2="班级"+t[s]+"指标较低,有待加强";var l=0;l="term1"===c.state.term?e.data.classCard1.term1_score:e.data.classCard2.term2_score,console.log(c.state.term+"score:"+l),console.log(e.data.classCard1.term1_score),l>=0&&l<=15?e.proposal="分数较低需要加强":l>15&&l<=30?e.proposal="分数一般继续努力":l>30&&l<=50&&(e.proposal="分数不错，期待你们班的更好表现")})),this.showLoad(),u.$emit("requestData","班级")},methods:{showLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].showLoading()}))},hideLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].hideLoading()}))},intoStudent:function(e,t,a){console.log("进入学生:"+e+" "+t+" "+a),console.log(this.$route),this.$router.push({name:"student",params:{studentid:e.name,classid:this.$route.params["classid"]}})},zhibiaochange:function(e){console.log("改变指标"),console.log(e),this.set_topstudent()},handleChange:function(e){},set_suchindexscore:function(){console.log("显示雷达图，当前学期");for(var e=this.data["suchindexscores"],t=-1,a=0;a<e.length;a+=1)for(var s=0;s<e[a].value.length;s+=1)e[a].value[s]>t&&(t=e[a].value[s]);var o={title:{text:"".concat(this.stateStore.termName()," 各指标雷达图")},tooltip:{},legend:{data:["学院指标平均分","班级指标平均分"],right:0},radar:{name:{textStyle:{color:"#000",backgroundColor:"#999",borderRadius:3,padding:[3,5]}},indicator:[{name:"思想政治",max:t},{name:"身心健康",max:t},{name:"创新创业",max:t},{name:"技术技能",max:t},{name:"志愿服务",max:t},{name:"人文艺术",max:t},{name:"综合素质理论",max:t}]},series:[{name:"学院指标平均分vs班级指标平均分",type:"radar",data:e}]};this.$refs["suchindexscore"].mergeOptions(o)},set_studentnames:function(){var e=this.data["students"]["student"];this.peoples.splice(0,this.peoples.length);for(var t=0;t<e.length;t+=1)this.peoples.push({name:e[t]})},set_topstudent:function(){if(console.log("设置top图表，当前指标是:"+this.nowIndex),Object.keys(this.data["topstudent"]).indexOf(this.nowIndex)<0)console.log("没有这个指标");else{var e=this.data["topstudent"][this.nowIndex]["names"],t=this.data["topstudent"][this.nowIndex]["scores"],a={title:{text:" ".concat(this.stateStore.termName()," 柱状图")},color:["#00E5EE"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:e,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"分数",type:"bar",barWidth:"60",data:t}]};this.$refs["topstudent"].mergeOptions(a)}},set_totalscores:function(){console.log("显示漏斗图，当前学期");var e=this.data["totalscores"]["ranges"],t=this.data["totalscores"]["allscores"],a={title:{text:"".concat(this.stateStore.termName(),"总分区间漏斗图")},tooltip:{trigger:"item",fromatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},legend:{data:e,bottom:0},calculable:!0,series:[{name:"总分区间图",type:"funnel",left:"20%",top:60,bottom:60,width:"80%",min:0,max:50,minSize:"0%",maxSize:"100%",sort:"descending",gap:2,label:{show:!0,position:"inside"},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{fontSize:20}},data:t}]};console.log(this.$refs["totalscores"]),console.log(a),this.$refs["totalscores"].mergeOptions(a,!1)}},data:function(){return{proposal:[],proposal2:"",stateStore:c.state,nowIndex:"总分Top5",data:$,peoples:["渣渣","渣渣辉"],options:[{value:"思想政治",label:"思想政治Top5"},{value:"身心健康",label:"身心健康Top5"},{value:"创新创业",label:"创新创业Top5"},{value:"技术技能",label:"技术技能Top5"},{value:"志愿服务",label:"志愿服务Top5"},{value:"人文艺术",label:"人文艺术Top5"},{value:"综合素质理论",label:"综合素质理论Top5"},{value:"总分",label:"总分Top5"}],value:"",activeNames:[1]}}},S=k,O=(a("8de1"),Object(x["a"])(S,_,C,!1,null,null,null)),L=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{"body-style":"padding:34px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"25px"}},[e._v("个人第一学期的基本情况")])]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第一学期综合素质分:"+e._s(e.data.studentCard1.term1_avlscore))]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第一学期综合素质全院排名:"+e._s(e.data.studentCard1.term1_yranking))]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第一学期综合素质全班排名:"+e._s(e.data.studentCard1.term1_cranking))])]),a("el-card",{attrs:{"body-style":"padding:34px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"25px"}},[e._v("个人第二学期的基本情况")])]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第二学期综合素质分:"+e._s(e.data.studentCard2.term2_avlscore))]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第二学期综合素质全院排名:"+e._s(e.data.studentCard2.term2_yranking))]),a("div",{staticStyle:{"font-size":"20px"}},[e._v("第二学期综合素质全班排名:"+e._s(e.data.studentCard2.term2_cranking))])])],1),a("el-col",{attrs:{span:12,xs:24}},[a("el-card",[a("v-chart",{ref:"scuhindexscore",staticClass:"chart",attrs:{autoresize:""}})],1)],1)],1),a("el-row",{staticStyle:{"margin-top":"25px"},attrs:{gutter:40}},[a("el-col",{attrs:{span:12,xs:24}},[a("el-card",[a("div",{staticStyle:{"font-size":"20px"}},[e._v("各个指标在全院的排名")]),a("el-table",{attrs:{data:e.CollegeData,fit:"",align:"center"}},[a("el-table-column",{attrs:{prop:"Collegindex",label:"各指标",width:"180"}}),a("el-table-column",{attrs:{prop:"Collegscores",label:"分数",width:"180"}}),a("el-table-column",{attrs:{prop:"Collegranking",label:"排名",width:"180"}})],1)],1)],1),a("el-col",{attrs:{span:12,xs:24}},[a("el-card",[a("div",{staticStyle:{"font-size":"20px"}},[e._v("各个指标在全班的排名")]),a("el-table",{attrs:{data:e.ClassData,fit:"",align:"center"}},[a("el-table-column",{attrs:{prop:"Classindex",label:"各指标",width:"180"}}),a("el-table-column",{attrs:{prop:"Classscores",label:"分数",width:"180"}}),a("el-table-column",{attrs:{prop:"Classranking",label:"排名",width:"180"}})],1)],1)],1)],1),a("el-row",[a("el-col",[a("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"建议",name:"1"}},[a("div",[e._v(e._s(e.proposal))]),a("div",[e._v(e._s(e.proposal2))])])],1)],1)],1)],1)},D=[],z={studentCard1:{term1_avlscore:34,term1_yranking:299,term1_cranking:12},studentCard2:{term2_avlscore:33,term2_yranking:333,term2_cranking:11},suchindexscores:[{value:[1,3,3,1,2,1,0],name:"学院指标平均分"},{value:[4,3,1,1,2,1,0],name:"班级指标平均分"},{value:[1,4,3,2,1,1,0],name:"学生指标分数"}],data1:{CollegeData:[{Collegindex:"身心健康",Collegscores:60,Collegranking:122},{Collegindex:"思想政治",Collegscores:60,Collegranking:122}]},data2:{ClassData:[{Classindex:"身心健康",Classscores:60,Classranking:122},{Classindex:"思想政治",Classscores:60,Classranking:122}]},scores:{score:40}},T={name:"student",mounted:function(){var e=this;u.$on("studentDataLoad",(function(t){console.log("个人界面请求数据"),console.log(t),e.data=t,e.set_suchindexscore(),e.hideLoad();for(var a=0,s=["思想政治","身心健康","创新创业","技术技能","志愿服务","人文艺术","综合素质理论"],o=0,r=e.data.suchindexscores[2].value,l=0;l<=r.length-2;l+=1)r[l]<r[o]&&(o=l);e.proposal2="你的"+s[o]+"指标较低，有待加强",a="term1"===c.state.term?e.data.studentCard1.term1_avlscore:e.data.studentCard2.term2_avlscore,a>=0&&a<=15?e.proposal="你的综合素质分较低，有待加强":a>15&&a<=30?e.proposal="你的综合素质分一般，应该适当加强":a>30&&a<=50?e.proposal="你的综合素质分还不错，继续加油":a>50&&a<=100&&(e.proposal="你的综合素质分挺好的")})),this.showLoad(),u.$emit("requestData","个人")},methods:{handleChange:function(e){console.log(e)},showLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].showLoading()}))},hideLoad:function(){var e=this;Object.keys(this.$refs).forEach((function(t){e.$refs[t].hideLoading()}))},set_suchindexscore:function(){console.log("显示个人当前学期的雷达图");for(var e=this.data["suchindexscores"],t=-1,a=0;a<e.length;a+=1)for(var s=0;s<e[a].value.length;s+=1)e[a].value[s]>t&&(t=e[a].value[s]);var o={title:{text:"".concat(this.stateStore.termName()," 各指标雷达图")},tooltip:{},legend:{data:["学院指标平均分","班级指标平均分","学生指标分数"],right:5},radar:{shape:"circle",axisLine:{},indicator:[{name:"思想政治",max:t,color:"black"},{name:"身心健康",max:t,color:"red"},{name:"创新创业",max:t,color:"orange"},{name:"技术技能",max:t,color:"pink"},{name:"志愿服务",max:t,color:"green"},{name:"人文艺术",max:t,color:"blue"},{name:"综合素质理论",max:t,color:"purple"}]},series:[{name:"学院指标平均分vs班级指标平均分vs学生指标分数",type:"radar",data:e}]};console.log(o),this.$refs["scuhindexscore"].mergeOptions(o)},set_CollegeData:function(){var e=this;this.CollegeData.splice(0,this.CollegeData.length),this.data["data1"]["CollegeData"].forEach((function(t){e.CollegeData.push(t)}))},set_ClassData:function(){var e=this;this.ClassData.splice(0,this.ClassData.length),this.data["data2"]["ClassData"].forEach((function(t){e.ClassData.push(t)}))}},computed:{CollegeData:function(){return this.data.data1.CollegeData},ClassData:function(){return this.data.data2.ClassData}},data:function(){return{proposal:[],proposal2:[],stateStore:c.state,data:z,activeNames:["1"]}}},N=T,E=Object(x["a"])(N,j,D,!1,null,null,null),I=E.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{staticStyle:{"margin-top":"200px"},attrs:{span:5,xs:20}},[a("el-form",{ref:"loginForm",attrs:{model:e.login,rules:e.rules,size:"medium"}},[a("el-form-item",{attrs:{error:e.errors.username,label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.login.username,callback:function(t){e.$set(e.login,"username",t)},expression:"login.username"}})],1),a("el-form-item",{attrs:{error:e.errors.password,label:"密码",prop:"password"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"medium"},on:{click:e.submitLogin}},[e._v("立即登录")])],1),a("a",{attrs:{href:"#"},on:{click:function(t){return e.register()}}},[e._v("没有账号?")])],1)],1)],1)],1)},F=[],q=function(e){return be("/api/auth/login",e)},P=function(e){return be("/api/auth/register",e)},A=function(){return ve("/api/auth/logout")},R=function(e){return be("/api/nav/classes",e)},U=function(){return ve("/api/auth/session")},B=function(e){return be("/api/auth/login/alterPassword",e)},M=a("5c96"),V=a.n(M),G={name:"login",mounted:function(){},beforeRouteUpdate:function(){},created:function(){var e=this;console.log("create...."),u.$on("showLogin",(function(){e.isShow=!0})),console.log("发送隐藏"),u.$emit("hideLogo",!1)},data:function(){return{errors:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度为8到16位",trigger:"blur"}]},isShow:!0,login:{}}},methods:{register:function(){this.$router.replace({name:"register"})},startLogin:function(){var e=this;M["Loading"].service({text:"正在登录....",fullscreen:!0}),q({username:this.login.username,password:this.login.password}).then((function(t){if(M["Loading"].service({fullscreen:!0}).close(),console.log("请求成功"),console.log(t),e.isShow=!1,0==t.code)e.$message({type:"success",message:"登录成功，正在跳转到页面"}),e.$router.push({name:"data"});else{console.log("登录返回非0");var a=t.data;if(console.log(a),void 0!==a.username){var s=a.username.join(",");-1!=s.indexOf("Invalid username")&&(e.errors.username="无效的用户名")}if(void 0!==a.password){var o=a.password.join(",");console.log(o),-1!=o.indexOf("Incorrect password!")&&(e.errors.password="密码错误!")}}})).catch((function(t){M["Loading"].service({fullscreen:!0}).close(),console.log("请求失败"),console.log(t);t.response.data;403==t.response.status?e.$message({type:"error",message:"登录,请检查用户名或密码"}):e.$message({type:"error",message:"登录失败,请检查网络连接"})}))},openLogin:function(){this.isShow=!0},submitLogin:function(){var e=this;console.log("提交登录...."),this.$refs["loginForm"].validate((function(t){t&&e.startLogin()}))}}},W=G,J=(a("d6db"),Object(x["a"])(W,Y,F,!1,null,null,null)),H=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",[a("el-select",{attrs:{placeholder:"打开可视化界面"},on:{change:e.openCollege},model:{value:e.selectCollege,callback:function(t){e.selectCollege=t},expression:"selectCollege"}},e._l(e.storeState.colleges,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-button",{on:{click:e.truncateFiles}},[e._v("一键清空表")])],1)],1),a("el-row",{attrs:{gutter:40}},[e._e(),a("el-col",{attrs:{span:14,xs:20}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("已经上传的数据")]),a("div",{staticStyle:{float:"right"}},[a("div",{staticStyle:{display:"inline","padding-right":"20px"}},[e._v("用户名:"+e._s(e.storeState.login.username))]),a("el-button",{attrs:{type:"success"},on:{click:e.qiandao}},[e._v("每日签到领金币")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改登录密码")]),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{size:"medium"}},[a("el-form-item",{attrs:{label:"原密码",prop:"password1"}},[a("el-input",{attrs:{placeholder:"原密码","show-password":""},model:{value:e.reg.password1,callback:function(t){e.$set(e.reg,"password1",t)},expression:"reg.password1"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"password2"}},[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.reg.password2,callback:function(t){e.$set(e.reg,"password2",t)},expression:"reg.password2"}})],1),a("el-form-item",{attrs:{label:"确认新密码",prop:"password3"}},[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.reg.password3,callback:function(t){e.$set(e.reg,"password3",t)},expression:"reg.password3"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.changgg}},[e._v("确 定")])],1)],1),a("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("退出登录")])],1)]),a("span",[e._v("上传新数据")]),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"选择学院"},model:{value:e.upload.college,callback:function(t){e.$set(e.upload,"college",t)},expression:"upload.college"}},e._l(e.storeState.colleges,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-date-picker",{attrs:{type:"year",placeholder:"选择年度"},model:{value:e.upload.year,callback:function(t){e.$set(e.upload,"year",t)},expression:"upload.year"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{type:"year",placeholder:"选择年级"},model:{value:e.upload.grade,callback:function(t){e.$set(e.upload,"grade",t)},expression:"upload.grade"}},e._l(e.uploadYears,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:4}},[a("el-select",{model:{value:e.upload.term,callback:function(t){e.$set(e.upload,"term",t)},expression:"upload.term"}},[a("el-option",{attrs:{label:"第一学期",value:"term1"}}),a("el-option",{attrs:{label:"第二学期",value:"term2"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-upload",{ref:"uploadNew",attrs:{limit:1,multiple:!1,"auto-upload":!1,data:e.uploadData,action:"/api/data/upload","on-success":e.uploadOk,"on-error":e.uploadNotOk,"on-change":e.uploadChange}},[a("el-button",{attrs:{slot:"trigger"},slot:"trigger"},[e._v("选择对应的Excel文件")]),a("el-button",{on:{click:e.submitUploadNew}},[e._v("上传数据")])],1)],1)],1),a("el-table",{attrs:{data:e.uploaded,"row-class-name":e.fileStateClassName}},[a("el-table-column",{attrs:{label:"学院",prop:"college"}}),a("el-table-column",{attrs:{label:"年度",prop:"year"}}),a("el-table-column",{attrs:{formatter:e.formatGrade,label:"年级",prop:"grade"}}),a("el-table-column",{attrs:{formatter:e.formatTerm,label:"学期",prop:"term"}}),a("el-table-column",{attrs:{formatter:e.formatState,label:"状态",prop:"state"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.deleteFile(t.row)}}},[e._v("删除数据")]),1==t.row.state?a("el-button",{on:{click:function(a){return e.parseFile(t.row)}}},[e._v("解析数据")]):e._e()]}}])})],1)],1)],1)],1)],1)},Q=[],X=function(e){return be("/api/data/handle",e,{timeout:5e4})},Z=function(e){return be("/api/data/delete",e)},ee=function(e){return be("/api/data/truncate")},te=function(e){return be("/api/data/uploaded")};function ae(e,t){e.splice(0,e.length);for(var a=0;a<t.length;a+=1)e.push(t[a])}function se(e,t){e.$alert(t,"发生错误",{confirmButtonText:"确定"})}var oe={name:"datamanage",data:function(){return{selectCollege:"",reg:{password1:"",password2:"",password3:""},dialogVisible:!1,storeState:c.state,upload:{year:"",grade:"",term:"",college:"大数据与人工智能学院"},uploadData:{},uploaded:[],year:new Date(2019,11,11),files:[{college:"测试",year:"2018"}]}},created:function(){console.log("组件创建..."),U().then((function(e){console.log("获取用户登录信息..."),console.log(e),console.log("设置用户名:"+e.data.username),c.setUserName(e.data.username)})).catch((function(e){console.log("获取用户信息出错:"),console.log(e)})),this.switchYear(2019),this.requestUpload()},computed:{uploadYears:function(){if(""===this.upload.year)return[];console.log(this.upload.year+Object(i["a"])(this.upload.year));for(var e=this.upload.year.getFullYear(),t=[],a=e;a>e-3;a-=1)t.push({label:a+"级",value:a+""});return t}},methods:{openCollege:function(e){console.log("打开学院:",e),this.$router.push({name:"college",params:{collegeid:e}})},qiandao:function(){this.$message({message:"签到成功,金币+10",type:"warning"})},changgg:function(){var e=this;this.reg.password2==this.reg.password3?(this.dialogVisible=!1,console.log("调用监听修改密码"),B({username:this.storeState.login.username,old_password:this.reg.password1,password:this.reg.password2,password2:this.reg.password3}).then((function(t){console.log("请求成功.."),console.log(t),0==t.code?(e.$message({showClose:!0,message:"密码修改成功,跳转到登录界面",type:"success"}),e.$router.push({name:"login"})):e.$message({showClose:!0,message:"密码失败:"+t.msg,type:"error"})})).catch((function(e){console.log("请求失败.")}))):this.$message({showClose:!0,message:"密码不一致",type:"error"})},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},logout:function(){var e=this;A().then((function(t){0==t.code?(e.$message({message:"登出成功!"}),e.$router.push({name:"login"})):se(e,t.msg)})).catch((function(e){}))},submitUploadNew:function(){console.log("上传数据..."),""!=this.upload.year?(this.uploadData["year"]=this.upload.year.getFullYear(),this.uploadData["grade"]=this.upload.grade,this.uploadData["term"]=this.upload.term,this.uploadData["college"]=this.upload.college,this.$refs.uploadNew.submit()):this.$message("年度没有选择!!")},requestUpload:function(){var e=this;te().then((function(t){console.log("获取已上传的数据:"),console.log(t),0==t.code?ae(e.uploaded,t.data):e.$alert(t.data,"失败",{confirmButtonText:"确定"})})).catch((function(e){console.log("获取已上传的数据失败")}))},formatGrade:function(e,t,a,s){return a?4==a.length?a.substring(2,4)+"级":a:"null"},formatTerm:function(e,t,a,s){return"term1"==a?"第一学期":"term2"==a?"第二学期":a},formatState:function(e,t,a,s){return 0==a?"未上传":1==a?"未解析":2==a?"解析完成":void 0},truncateFiles:function(){var e=this;ee().then((function(t){console.log("清空表成功.."),e.switchYear(e.year.getFullYear())})).catch((function(e){console.log("清空表失败..")}))},deleteFile:function(e){var t=this,a={year:e.year,grade:e.grade,term:e.term,college:e.college};M["Loading"].service({text:"删除数据文件和数据库里的记录....",fullscreen:!0}),Z(a).then((function(e){M["Loading"].service({fullscreen:!0}).close(),console.log("ffff"),console.log(e),0==e.code?(t.$message({type:"success",message:"清空数据成功:"+e.msg}),t.switchYear(t.year.getFullYear())):t.$alert(e.msg,"删除数据失败",{confirmButtonText:"确定"})})).catch((function(e){M["Loading"].service({fullscreen:!0}).close(),console.log(e),t.$alert(e.data,"服务器响应失败,清空数据失败",{confirmButtonText:"确定"})}))},parseFile:function(e){var t=this;console.log("解析数据:"),console.log(e),M["Loading"].service({text:"解析数据到数据库中....",fullscreen:!0});var a={year:e.year,grade:e.grade,term:e.term,college:e.college};X(a).then((function(e){M["Loading"].service({fullscreen:!0}).close(),console.log(e),0!=e.code?t.$alert(e.msg,"服务器响应上传失败",{confirmButtonText:"确定"}):t.$message({type:"success",message:"解析成功"}),t.switchYear(t.year.getFullYear())})).catch((function(e){t.$alert("捕捉到异常:"+e,"解析错误",{confirmButtonText:"确定"}),M["Loading"].service({fullscreen:!0}).close()}))},uploadOk:function(e,t,a){0!=e.code?this.$alert(e.msg,"服务器响应上传失败",{confirmButtonText:"确定"}):this.$message({type:"success",message:"上传成功"}),this.switchYear(this.year.getFullYear()),this.$refs.uploadNew.clearFiles()},uploadNotOk:function(e,t,a){console.log("上传文件不成功..."),console.log(e),this.$alert(e,"上传失败",{confirmButtonText:"确定"}),this.$refs.uploadNew.clearFiles()},uploadChange:function(e,t){if(console.log("文件状态改变:"),console.log(e),console.log(t),1==t.length){var a=t[0].name;console.log("添加文件名:"+a);var s=/(\d+)级/g,o=/第(.)学期/g,r=/(\d{4})-\d{4}/g,l=s.exec(a),n=o.exec(a),i=r.exec(a);console.log("尝试在文件名里查找参数:"+l),console.log(n),console.log(i),2==l.length&&2==n.length&&2==i.length?(n=n[1],"一"==n?n="term1":"二"==n&&(n="term2"),l=l[1],i=i[1],this.$message({type:"success",message:"文件名里获取年度等数据成功,年度:".concat(i," 年级:").concat(l," 学期:").concat(n)}),this.upload.grade=l,this.upload.term=n,this.upload.year=new Date(i,1,1)):this.$message({type:"error",message:"文件名里获取年度等数据失败，请手动选择"})}},getUploadPostData:function(e){return{year:e.year,grade:e.grade,term:e.term}},fileStateClassName:function(e,t){return 0==e.row.state?"file-no-upload":1==e.row.state?"file-ok":void 0},changeYear:function(e){this.switchYear(e.getFullYear())},switchYear:function(e){this.requestUpload(),console.log("选择年份:"+e)},submitUpload:function(){this.$refs.upload.submit()}}},re=oe,le=(a("af04"),Object(x["a"])(re,K,Q,!1,null,null,null)),ne=le.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"bg"}},[a("el-row",{staticStyle:{"margin-right":"100px","margin-top":"110px"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:5,xs:20}},[a("div",{staticStyle:{"font-size":"44px","margin-bottom":"20px"}},[e._v("欢迎注册")]),a("div",{staticStyle:{"font-size":"28px","margin-bottom":"64px"}},[e._v("\n        每一天,乐在沟通\n        "),a("div",{staticStyle:{color:"#359eff",float:"right"}})]),a("el-form",{attrs:{size:"medium"}},[a("el-form-item",{attrs:{error:e.errors.username,label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.reg.username,callback:function(t){e.$set(e.reg,"username",t)},expression:"reg.username"}})],1),a("el-form-item",{attrs:{error:e.errors.password,label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.reg.password,callback:function(t){e.$set(e.reg,"password",t)},expression:"reg.password"}})],1),a("el-form-item",{attrs:{error:e.errors.password2,label:"确认密码",prop:"password2"}},[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.reg.password2,callback:function(t){e.$set(e.reg,"password2",t)},expression:"reg.password2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submit()}}},[e._v("立即注册")])],1),a("el-form-item",[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("相关哈哈哈哈哈")]),a("div",[a("el-checkbox",{on:{change:e.agree},model:{value:e.isAgree,callback:function(t){e.isAgree=t},expression:"isAgree"}},[e._v("我已阅读并同意相关服务条款和隐私政策")]),a("img",{attrs:{onclick:"",src:"/favicon.ico"}})],1)])],1)],1)],1)],1)],1)},ce=[],de=(a("3c43"),{name:"bg",created:function(){u.$emit("hideLogo",!1)},methods:{agree:function(){},submit:function(){var e=this;this.isAgree?this.reg.password==this.reg.password2?(M["Loading"].service({text:"正在注册....",fullscreen:!0}),P({username:this.reg.username,password:this.reg.password}).then((function(t){if(M["Loading"].service({fullscreen:!0}).close(),console.log("注册结果:"),console.log(t),0==t.code)e.$message({showClose:!0,message:"注册成功，正在跳转到登录界面...",type:"success"}),e.$router.replace({name:"login"});else{var a=t.data;if(void 0!==a.username){var s=a.username.join(",");-1!=s.indexOf("already exists!")&&(e.errors.username="用户名已存在")}if(void 0!==a.password){var o=a.password.join(",");"Field must be between 8 and 16 characters long."==o&&(e.errors.password="密码必须在8到16各长度之间")}}})).catch((function(t){M["Loading"].service({fullscreen:!0}).close(),console.log(t),console.log("注册失败:"),e.$message({type:"error",message:"注册失败"})}))):this.errors.password2="两次密码不一样":this.$message({message:"请勾选同意相关协议",type:"warning"})}},data:function(){return{isAgree:!1,errors:{username:"",password:"",password2:""},reg:{username:"",password:"",password2:""}}}}),ue=de,pe=(a("2cfd"),Object(x["a"])(ue,ie,ce,!1,null,null,null)),ge=pe.exports;s["default"].use(m["a"]);var me=[{path:"/zhzs/:collegeid",component:w,name:"college"},{path:"/zhzs/:collegeid/:classid/:studentid",component:I,name:"student"},{path:"/zhzs/:collegeid/:classid",component:L,name:"class"},{path:"/login",component:H,name:"login"},{path:"/",component:ne,name:"data"},{path:"/data",component:ne,name:"data"},{path:"/register",component:ge,name:"register"}],he=new m["a"]({routes:me}),fe=he;function ve(e,t){return new Promise((function(a,s){g.a.get(e,{params:t}).then((function(e){a(e.data)})).catch((function(e){s(e)}))}))}function be(e,t,a){return new Promise((function(s,o){g.a.post(e,t,a).then((function(e){s(e.data)})).catch((function(e){o(e)}))}))}g.a.defaults.withCredentials=!0,g.a.defaults.timeout=3e3,g.a.defaults.headers.post["Content-Type"]="Content-Type：application/json;charset=UTF-8",g.a.interceptors.response.use((function(e){return console.log("请求拦截:成功"),200===e.status?Promise.resolve(e):Promise.reject(e)}),(function(e){if(console.log("拦截失败"),void 0===e["response"])return Promise.reject(e.message);switch(console.log(e.response),e.response.status){case 401:Object(M["Message"])({type:"error",message:"没登录，重定向到登录界面"}),console.log("-------------重定向................"),fe.replace({name:"login"});break;case 403:break}return Promise.reject(e)}));var xe={name:"app-logo",mounted:function(){var e=this;u.$on("hideLogo",(function(t){console.log("接受是否loggo:"+t),e.showSelect=t})),u.$on("requestData",(function(t){console.log("来自:".concat(t,"的请求重新加载数据事件")),e.requestNav()}))},created:function(){var e=this;console.log("创建logo组件......."),this.$router.afterEach((function(e,t){console.log("全局after each")})),this.$router.beforeEach((function(t,a,s){console.log("Logo.vue beforeEach....."+e.$router.currentRoute.name),s()}))},computed:{collegename:function(){return console.log("获取学院名字..."),console.log(this.$route.params),-1!=Object.keys(this.$route.params).indexOf("collegeid")?this.$route.params["collegeid"]:""}},beforeRouteEnter:function(e,t,a){console.log("beforeRouteEnter...."),console.log(e)},methods:{requestNav:function(){var e=this;this.loading=!0,R({college:this.collegename}).then((function(t){e.loading=!1,console.log("请求logo导航数据成功!!"),console.log(t),ae(e.classes,t.data.classes),ae(e.years,t.data.years),console.log("组件的班级..."),console.log(e.classes),e.year=e.years[0],e.selectYear()})).catch((function(t){e.loading=!1,e.showFailDialog("加载年度和班级列表数据失败!!",e.requestNav),e.selectYear()}))},home:function(){this.$router.push({name:"data"})},intoClass:function(e,t){console.log("进入班级:"+e);var a=e.join("");this.$route.params["classid"]=a,this.$router.push({name:"class",params:{classid:a}})},selectYear:function(){if(this.showSelect=!0,console.log("当前路由:"),console.log(this.$router.currentRoute),console.log("选择的year:"+this.year+" term:"+this.term),c.setYear(this.year),c.setTerm(this.term),this.loading=!0,"college"==this.$router.currentRoute.name)this.requestCollege();else if("class"==this.$router.currentRoute.name){var e=this.$router.currentRoute.params["classid"];this.requestClass(e)}else"student"==this.$router.currentRoute.name?this.requestStudent(this.$router.currentRoute.params["studentid"],this.$router.currentRoute.params["classid"]):this.loading=!1},showFailDialog:function(e,t){this.$confirm(e,"加载数据失败",{confirmButtonText:"重试",cancelButtonText:"显示测试数据",callback:function(e){console.log("开始重试..."),console.log(e),"confirm"==e&&void 0!=t&&t()}})},requestCollege:function(){var e=this;be("/api/collage",{college:this.collegename,year:c.state.year,term:c.state.term}).then((function(t){console.log("请求学院数据成功:.."),console.log(t),e.loading=!1,Object.assign(d,t),u.$emit("collegeDataLoad",d)})).catch((function(t){console.warn("请求学院界面数据失败,发送测试数据...>>>"),e.showFailDialog("获取学院数据失败:\n"+t,e.selectYear),e.loading=!1,u.$emit("collegeDataLoad",d)}))},requestClass:function(e){var t=this;console.log("-------------------请求班级数据------------------"),be("/api/banji",{college:this.collegename,classid:e,year:c.state.year,term:c.state.term}).then((function(e){console.log("请求班级数据:.."),console.log(e),t.loading=!1,Object.assign($,e),u.$emit("classDataLoad",$)})).catch((function(e){console.log("请求数据失败>>>"),console.log(e),t.loading=!1,u.$emit("classDataLoad",$),t.showFailDialog("获取班级数据失败:\n"+e,t.selectYear)}))},requestStudent:function(e,t){var a=this;console.log("请求学生数据...."),console.log(this.$route.params),be("/api/geren",{college:this.collegename,stu_id:e,year:c.state.year,term:c.state.term,classid:t}).then((function(e){console.log("请求个人的数据:.."),console.log(e),console.log(Object(i["a"])(e)),a.loading=!1,Object.assign(z,e),u.$emit("studentDataLoad",z)})).catch((function(e){a.$alert(e,"服务器响应失败",{confirmButtonText:"确定"}),console.log("请求数据失败>>>----------"),console.log(e),a.showFailDialog("获取学生数据失败:\n"+e,a.selectYear),a.loading=!1,u.$emit("studentDataLoad",z)}))}},data:function(){return{showSelect:!1,loading:!1,year:c.state.year,term:c.state.term,classes:[{label:"17",value:"17",children:[{label:"大数据",value:"bigdata"},{label:"云计算",value:"clound"}]},{label:"18",value:"18",children:[{label:"大数据",value:"bigdata"},{label:"云计算",value:"clound"}]}],years:[],terms:[{value:"term1",label:"第一学期"},{value:"term2",label:"第二学期"},{value:"year",label:"年度"}]}}},ye=xe,we=Object(x["a"])(ye,l,n,!1,null,"18e1e646",null),_e=we.exports,Ce={name:"app",data:function(){return{}},components:{Logo:_e},methods:{}},$e=Ce,ke=(a("034f"),Object(x["a"])($e,o,r,!1,null,null,null)),Se=ke.exports,Oe=(a("0fae"),a("9ca8")),Le=(a("94b1"),a("c037"),a("ef97"),a("8deb"),a("a4b1"),a("15af"),a("d28f"),a("007d"),a("627c"),a("f219"),a("98c9"));s["default"].use(Le["a"]),s["default"].component("v-chart",Oe["a"]),s["default"].config.productionTip=!1,s["default"].use(V.a),new s["default"]({render:function(e){return e(Se)},router:fe}).$mount("#app")},"64a9":function(e,t,a){},"8de1":function(e,t,a){"use strict";var s=a("934c"),o=a.n(s);o.a},"934c":function(e,t,a){},9605:function(e,t,a){},a9e7:function(e,t,a){},af04:function(e,t,a){"use strict";var s=a("9605"),o=a.n(s);o.a},c512:function(e,t,a){},d6db:function(e,t,a){"use strict";var s=a("a9e7"),o=a.n(s);o.a},e07e:function(e,t,a){},f631:function(e,t,a){"use strict";var s=a("c512"),o=a.n(s);o.a}});
//# sourceMappingURL=app.0a5e3dab.js.map